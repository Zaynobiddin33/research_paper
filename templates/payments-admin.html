{% extends "base.html" %}
{% load static %}

{% block style %}
    <link rel="stylesheet" href="{% static 'main/css/papers.css' %}">
    <link rel="stylesheet" href="{% static 'main/css/payments-admin.css' %}">
{% endblock %}

{% block content %}
    <section class="review-container">
        <div class="d-flex justify-content-center">
            <a href="{% url 'payments_stats' %}" class="btn btn-primary rounded-pill px-5 py-3 fw-medium">To'lovlar
                statistikasi</a>
            <br>
        </div>
        <br>
        <h1 class="page-title">To‘lovlarni Tekshirish</h1>
        <p class="page-subtitle">Admin sahifasi — foydalanuvchilar yuborgan to‘lov cheklarini to‘liq ko‘rib chiqing.</p>

        <div class="row g-4">
            {% for payment in payments %}
                <div class="col-12 col-md-6 col-lg-4">
                    <div class="payment-card">
                        <img src="{{ payment.check_image.url }}" alt="Payment Screenshot" class="payment-img"
                             onclick="openModal('{{ payment.check_image.url }}')">
                        <div class="payment-body">
                            <div class="payment-user">{{ payment.paper.owner.first_name }} {{ payment.paper.owner.last_name }}</div>
                            <a href="{% url 'accept_payment' payment.id %}" class="btn-approve">Tasdiqlash</a>
                            <a href="{% url 'deny_payment' payment.id %}" class="btn-deny">Rad etish</a>
                        </div>
                    </div>
                </div>
            {% empty %}
                <p class="text-center text-muted mt-4">Hozircha to‘lovlar mavjud emas.</p>
            {% endfor %}
        </div>
    </section>

    <!-- Fullscreen modal -->
    <div id="imageModal" class="modal" onclick="closeModal()">
        <span class="close-btn" onclick="closeModal()">&times;</span>
        <img id="modalImage" src="" alt="Fullscreen image">
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script src="{% static 'main/js/payments-admin.js' %}"></script>
{% endblock %}